//! Impl module for tool_chain types
//!
//! This module contains behavior for generated types.
//! The types are imported from familiar-contracts.

use familiar_contracts::prelude::*;
use serde::{Serialize, Deserialize};
use std::sync::Arc;

// Impl blocks for ToolChain

// Methods: memory_recording, query
impl ToolChain { # [doc = " Create a memory recording pipeline"] pub fn memory_recording () -> Self { Self { id : "memory_recording" . to_string () , name : "Memory Recording Pipeline" . to_string () , description : "Segment → Purpose → Classify → Spawn → Hints → Store" . to_string () , steps : vec ! [ToolChainStep { id : "segment" . to_string () , tool : "text_segmentation" . to_string () , execution_order : ExecutionOrder :: Sequential , input_mapping : vec ! [] , condition : None , parallel_with : vec ! [] , timeout_ms : Some (5000) , required : true , } , ToolChainStep { id : "purpose" . to_string () , tool : "purpose_classifier" . to_string () , execution_order : ExecutionOrder :: Sequential , input_mapping : vec ! [InputMapping { from_step : "segment" . to_string () , from_path : "segments" . to_string () , to_path : "segments" . to_string () , transform : None , }] , condition : None , parallel_with : vec ! [] , timeout_ms : Some (3000) , required : true , } , ToolChainStep { id : "classify" . to_string () , tool : "entity_classifier" . to_string () , execution_order : ExecutionOrder :: Sequential , input_mapping : vec ! [] , condition : None , parallel_with : vec ! [] , timeout_ms : Some (5000) , required : true , } , ToolChainStep { id : "spawn" . to_string () , tool : "spawn_suggester" . to_string () , execution_order : ExecutionOrder :: Sequential , input_mapping : vec ! [] , condition : None , parallel_with : vec ! [] , timeout_ms : Some (3000) , required : true , } , ToolChainStep { id : "physics_hints" . to_string () , tool : "physics_hint_generator" . to_string () , execution_order : ExecutionOrder :: Parallel , input_mapping : vec ! [] , condition : None , parallel_with : vec ! ["thread_hints" . to_string () , "bond_hints" . to_string ()] , timeout_ms : Some (3000) , required : false , } , ToolChainStep { id : "thread_hints" . to_string () , tool : "thread_hint_generator" . to_string () , execution_order : ExecutionOrder :: Parallel , input_mapping : vec ! [] , condition : None , parallel_with : vec ! [] , timeout_ms : Some (3000) , required : false , } , ToolChainStep { id : "bond_hints" . to_string () , tool : "bond_hint_generator" . to_string () , execution_order : ExecutionOrder :: Parallel , input_mapping : vec ! [] , condition : None , parallel_with : vec ! [] , timeout_ms : Some (3000) , required : false , } , ToolChainStep { id : "binding_hints" . to_string () , tool : "binding_hint_generator" . to_string () , execution_order : ExecutionOrder :: Sequential , input_mapping : vec ! [] , condition : None , parallel_with : vec ! [] , timeout_ms : Some (3000) , required : false , } ,] , context_strategy : ContextStrategy :: AccumulatingContext , error_strategy : ErrorStrategy :: ContinueOnError , } } # [doc = " Create a query pipeline"] pub fn query () -> Self { Self { id : "query" . to_string () , name : "Query Pipeline" . to_string () , description : "Purpose → Query Analysis → Search → Format" . to_string () , steps : vec ! [ToolChainStep { id : "purpose" . to_string () , tool : "purpose_classifier" . to_string () , execution_order : ExecutionOrder :: Sequential , input_mapping : vec ! [] , condition : None , parallel_with : vec ! [] , timeout_ms : Some (3000) , required : true , } , ToolChainStep { id : "query_analysis" . to_string () , tool : "query_analyzer" . to_string () , execution_order : ExecutionOrder :: Sequential , input_mapping : vec ! [] , condition : None , parallel_with : vec ! [] , timeout_ms : Some (3000) , required : true , } , ToolChainStep { id : "search" . to_string () , tool : "rag_search" . to_string () , execution_order : ExecutionOrder :: Sequential , input_mapping : vec ! [] , condition : None , parallel_with : vec ! [] , timeout_ms : Some (10000) , required : true , } , ToolChainStep { id : "format" . to_string () , tool : "response_formatter" . to_string () , execution_order : ExecutionOrder :: Sequential , input_mapping : vec ! [] , condition : None , parallel_with : vec ! [] , timeout_ms : Some (3000) , required : true , } ,] , context_strategy : ContextStrategy :: FilteredContext , error_strategy : ErrorStrategy :: FailFast , } } }

